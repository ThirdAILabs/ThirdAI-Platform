<!DOCTYPE html>
<html>

<head>
  <style>
    table,
    th,
    td {
      border: 1px solid black;
      border-collapse: collapse;
    }

    th,
    td {
      padding: 10px;
    }
  </style>
  <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
  <script>
    function formatTime(timestamp) {
      var date = new Date();
      date.setTime(Date.parse(timestamp));
      return date.toUTCString();
    }

    function getModels() {
      $.ajax({
        url: "/api/v1/all-models",
        type: "GET",
        headers: {
          "Cache-Control": "no-cache",
          "Authorization": `Bearer ${window.localStorage.getItem("jwt")}`,
        },
        contentType: "application/json",
        success: function (response) {
          var items = response["models"].map(
            model => `
            <tr>
              <td>${model.name}</td>
              <td>${model.id}</td>
              <td>${model.model_type}</td>
              <td>${model.model_subtype}</td>
              <td>${model.access}</td>
              <td>${(model.size / 1000000).toFixed(3)}</td>
              <td>${formatTime(model.created_at)}</td>
              <td>${model.description}</td>
            </tr>`
          ).join("");
          var table = `
          <table>
            <tr>
              <th>Model Name</th>
              <th>Id</th>
              <th>Model Type</th>
              <th>Model Subtype</th>
              <th>Access</th>
              <th>Size (Mb)</th>
              <th>Created At</th>
              <th>Description</th>
            </tr>
            ${items}
          </table>`;

          document.getElementById("model-list").innerHTML = table
        }
      })
    }

    window.onload = getModels
  </script>
</head>

<body>
  <h2>Admin Dashboard</h2>
  <div id="model-list">

  </div>
</body>

</html>